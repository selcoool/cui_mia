DÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ¡ch Ä‘iá»u khiá»ƒn cÃ¢n báº±ng cho drone sá»­ dá»¥ng MPU6050 vÃ  PID control trong Arduino:

1. NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng cá»§a PID control trong drone
Äá»ƒ duy trÃ¬ sá»± á»•n Ä‘á»‹nh trong khÃ´ng gian 3D, drone cáº§n Ä‘iá»u khiá»ƒn 3 gÃ³c chÃ­nh: pitch, roll vÃ  yaw.

Trong trÆ°á»ng há»£p nÃ y, chÃºng ta táº­p trung vÃ o hai gÃ³c pitch vÃ  roll, vÃ¬ chÃºng lÃ  yáº¿u tá»‘ chÃ­nh Ä‘á»ƒ duy trÃ¬ thÄƒng báº±ng cá»§a drone.

a. Pitch (GÃ³c nÃ¢ng/háº¡ mÅ©i drone):
Pitch lÃ  gÃ³c nghiÃªng cá»§a drone theo phÆ°Æ¡ng trÆ°á»›c/sau.

Náº¿u drone nghiÃªng vá» phÃ­a trÆ°á»›c, pitch cÃ³ giÃ¡ trá»‹ Ã¢m; náº¿u nghiÃªng vá» phÃ­a sau, pitch cÃ³ giÃ¡ trá»‹ dÆ°Æ¡ng.

b. Roll (GÃ³c nghiÃªng trÃ¡i/pháº£i):
Roll lÃ  gÃ³c nghiÃªng cá»§a drone theo phÆ°Æ¡ng trÃ¡i/pháº£i.

Náº¿u drone nghiÃªng sang trÃ¡i, roll cÃ³ giÃ¡ trá»‹ Ã¢m; náº¿u nghiÃªng sang pháº£i, roll cÃ³ giÃ¡ trá»‹ dÆ°Æ¡ng.

2. Sá»­ dá»¥ng cáº£m biáº¿n MPU6050 Ä‘á»ƒ Ä‘o pitch vÃ  roll
MPU6050 lÃ  má»™t cáº£m biáº¿n IMU (Inertial Measurement Unit) cÃ³ thá»ƒ Ä‘o gia tá»‘c vÃ  tá»‘c Ä‘á»™ quay, giÃºp xÃ¡c Ä‘á»‹nh pitch vÃ  roll cá»§a drone.

Accelerometer (Gia tá»‘c káº¿): Äo gia tá»‘c trong cÃ¡c trá»¥c x, y, z.

Gyroscope (Con quay há»“i chuyá»ƒn): Äo tá»‘c Ä‘á»™ quay quanh cÃ¡c trá»¥c x, y, z.

Pitch vÃ  roll cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ­nh toÃ¡n tá»« dá»¯ liá»‡u gia tá»‘c (accelerometer) theo cÃ´ng thá»©c sau:

Pitch:

pitch
=
atan2
(
ğ‘
ğ‘¦
,
ğ‘
ğ‘¥
2
+
ğ‘
ğ‘§
2
)
pitch=atan2(ay, 
ax 
2
 +az 
2
 
â€‹
 )
Roll:

roll
=
atan2
(
âˆ’
ğ‘
ğ‘¥
,
ğ‘
ğ‘¦
2
+
ğ‘
ğ‘§
2
)
roll=atan2(âˆ’ax, 
ay 
2
 +az 
2
 
â€‹
 )
3. Thuáº­t toÃ¡n PID Ä‘á»ƒ Ä‘iá»u khiá»ƒn Ä‘á»™ng cÆ¡
Äá»ƒ Ä‘iá»u chá»‰nh cÃ¡c Ä‘á»™ng cÆ¡ cá»§a drone, chÃºng ta sá»­ dá»¥ng PID controller (PID lÃ  tá»« viáº¿t táº¯t cá»§a Proportional, Integral, Derivative). PID sáº½ giÃºp Ä‘iá»u chá»‰nh tá»‘c Ä‘á»™ Ä‘á»™ng cÆ¡ dá»±a trÃªn sai sá»‘ giá»¯a giÃ¡ trá»‹ thá»±c táº¿ (pitch, roll) vÃ  giÃ¡ trá»‹ má»¥c tiÃªu (0 Ä‘á»™ - tá»©c lÃ  khÃ´ng nghiÃªng).

a. CÃ´ng thá»©c PID:
P (Proportional): Pháº£n há»“i tá»· lá»‡ vá»›i sai sá»‘ hiá»‡n táº¡i.

ğ‘ƒ
=
ğ¾
ğ‘
Ã—
error
P=KpÃ—error
I (Integral): TÃ­nh toÃ¡n sai sá»‘ tÃ­ch lÅ©y trong quÃ¡ khá»© Ä‘á»ƒ Ä‘iá»u chá»‰nh.

ğ¼
=
ğ¾
ğ‘–
Ã—
âˆ«
error
I=KiÃ—âˆ«error
D (Derivative): Äo tá»‘c Ä‘á»™ thay Ä‘á»•i cá»§a sai sá»‘, giÃºp giáº£m thiá»ƒu dao Ä‘á»™ng.

ğ·
=
ğ¾
ğ‘‘
Ã—
ğ‘‘
(
error
)
ğ‘‘
ğ‘¡
D=KdÃ— 
dt
d(error)
â€‹
 
Tá»•ng há»£p cÃ¡c thÃ nh pháº§n cá»§a PID:

PIDÂ output
=
ğ‘ƒ
+
ğ¼
+
ğ·
PIDÂ output=P+I+D
4. Äiá»u khiá»ƒn Ä‘á»™ng cÆ¡ cá»§a drone
Motor Control: Äá»ƒ Ä‘iá»u khiá»ƒn drone giá»¯ cÃ¢n báº±ng, chÃºng ta cáº§n Ä‘iá»u chá»‰nh tá»‘c Ä‘á»™ cÃ¡c Ä‘á»™ng cÆ¡. Má»—i Ä‘á»™ng cÆ¡ sáº½ Ä‘Æ°á»£c Ä‘iá»u chá»‰nh sao cho drone khÃ´ng bá»‹ nghiÃªng vá» phÃ­a trÆ°á»›c, sau, trÃ¡i hay pháº£i.

Äá»‘i vá»›i má»™t drone 4 cÃ¡nh (quadcopters), má»—i Ä‘á»™ng cÆ¡ sáº½ Ä‘iá»u khiá»ƒn má»™t gÃ³c riÃªng biá»‡t:

Äá»™ng cÆ¡ 1 vÃ  Ä‘á»™ng cÆ¡ 3 Ä‘iá»u khiá»ƒn pitch.

Äá»™ng cÆ¡ 2 vÃ  Ä‘á»™ng cÆ¡ 4 Ä‘iá»u khiá»ƒn roll.